<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leo Editor for the web</title>
    <style>
        /* Inline critical CSS to prevent FOUC */
        html {
            background-color: rgba(128, 128, 128, 0.5);
            transition: background-color 0.3s ease-in;
        }

        body {
            opacity: 0;
            transition: opacity 0.3s ease-in;
            overflow-y: hidden;
        }

        body.loaded {
            opacity: 1;
        }

        html.loaded {
            background-color: transparent;
        }
    </style>
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="icon" href="/favicon.ico" sizes="32x32">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
</head>

<body>
    <!--
    * Layout *
    The main-container element is split in two (outline-find-container and body-pane) by the main-resizer.
    The outline-find-container is split in two (outline-pane and find-pane) by the secondary-resizer.
    So in total, there are three panes and two resizers. The rest are just floating buttons which are not part of the layout.
    -->
    <div id="top-bar">
        <div id="top-container">
            <div id="document-tabs">
            </div>
            <div id="top-menu"></div>
        </div>
        <!-- Top menu toggle is at the right: -->
        <div id="top-menu-toggle" aria-label="Hide menu" title="Hide menu">&#8801;</div>
    </div>
    <div id="main-container">
        <!-- * Note: outline-find-container is initially hidden to prevent FOUC -->
        <div id="outline-find-container" style="visibility: hidden;">
            <div id="outline-pane" tabindex="0">
                <div id="spacer"></div>
                <input id="headline-input" type="text" autocomplete="off" />
                <div id="collapse-all-btn" class="outline-icon" title="Collapse All" role="button"
                    aria-label="Collapse All">
                    <svg width="16" height="16" fill="currentColor">
                        <path
                            d="M 6 2 L 5 3 L 5 5 L 3 5 L 2 6 L 2 13 L 3 14 L 10 14 L 11 13 L 11 11 L 13 11 L 14 10 L 14 3 L 13 2 L 6 2 z M 6 3 L 13 3 L 13 10 L 11 10 L 11 6 L 10 5 L 6 5 L 6 3 z M 3 6 L 10 6 L 10 13 L 3 13 L 3 6 z M 4 9 L 4 10 L 9 10 L 9 9 L 4 9 z "
                            style="fill:var(--find-border-color);" />
                    </svg>
                </div>
            </div>
            <div id="secondary-resizer"></div>
            <div id="log-pane" tabindex="-1">
                <div id="log-pane-tabs">
                    <div class="tab" id="log-tab" title="Log Pane">Log</div>
                    <div class="tab" id="find-tab" title="Find Pane">Find</div>
                    <!-- Future possible tab -->
                    <div class="tab" id="nav-tab" title="Nav Pane">Nav</div>
                    <!-- <div class="tab" id="undo-tab" title="Undo Pane">Undo</div> -->
                    <div class="tab" id="settings-tab" title="Settings Pane">Settings</div>
                </div>

                <!-- Log Controls -->
                <div id="log-controls" class="log-pane-container" role="region" aria-label="Log Pane"
                    spellcheck="false">
                    <!-- <div id="log-content" contenteditable="plaintext-only" spellcheck="false"></div> -->
                </div>

                <!-- Find controls -->
                <div id="find-controls" class="log-pane-container" role="region" aria-label="Find options">
                    <div class="find-input-holder">
                        <input id="find-input" type="text" autocomplete="off" placeholder="&lt;find pattern here&gt;"
                            title="Enter or F3 to find and goto the next match&#013;F2 for the previous match"
                            aria-label="Find pattern">
                        <input id="replace-input" type="text" autocomplete="off"
                            placeholder="&lt;replace pattern here&gt;"
                            title="Replace (Ctrl+=)&#013;Replace &amp; Find Next (Ctrl+-)" aria-label="Replace pattern">
                    </div>
                    <div class="bottom-scroll">
                        <div class="find-col" aria-label="Search options">
                            <label title="Match Whole Word (Ctrl+Alt+W)" for="opt-whole">
                                <input id="opt-whole" type="checkbox" name="find-option" />
                                <span>Whole <u>W</u>ord</span>
                            </label>
                            <label title="Matches Ignore Case (Ctrl+Alt+I)" for="opt-ignorecase">
                                <input id="opt-ignorecase" type="checkbox" name="find-option" checked />
                                <span><u>I</u>gnore Case</span>
                            </label>
                            <label title="Use Regular Expression (Ctrl+Alt+X)" for="opt-regexp">
                                <input id="opt-regexp" type="checkbox" name="find-option" />
                                <span>Rege<u>x</u>p</span>
                            </label>
                            <label title="Mark Found nodes (Ctrl+Alt+F)" for="opt-mark-finds">
                                <input id="opt-mark-finds" type="checkbox" name="find-option" />
                                <span>Mark <u>F</u>inds</span>
                            </label>
                            <label title="Mark Changed nodes (Ctrl+Alt+C)" for="opt-mark-changes">
                                <input id="opt-mark-changes" type="checkbox" name="find-option" />
                                <span>Mark <u>C</u>hanges</span>
                            </label>
                        </div>
                        <div class="find-col" role="radiogroup" aria-label="Search scope">
                            <label title="Search in Whole Outline (Ctrl+Alt+E)" for="scope-entire">
                                <input id="scope-entire" type="radio" name="find-scope" value="entire" checked />
                                <span><u>E</u>ntire Outline</span>
                            </label>
                            <label title="Limit to Selected Outline (Ctrl+Alt+S)" for="scope-suboutline">
                                <input id="scope-suboutline" type="radio" name="find-scope" value="suboutline" />
                                <span><u>S</u>uboutline Only</span>
                            </label>
                            <label title="Limit to Selected Node (Ctrl+Alt+N)" for="scope-node">
                                <input id="scope-node" type="radio" name="find-scope" value="node" />
                                <span><u>N</u>ode Only</span>
                            </label>
                            <label title="Limit to External Files (Ctrl+Alt+L)" for="scope-file">
                                <input id="scope-file" type="radio" name="find-scope" value="file" />
                                <span>Fi<u>l</u>e Only</span>
                            </label>
                            <label title="Search in Headlines (Ctrl+Alt+H)" for="opt-headline">
                                <input id="opt-headline" type="checkbox" name="find-target" checked />
                                <span>Search <u>H</u>eadline</span>
                            </label>
                            <label title="Search in Body Text (Ctrl+Alt+B)" for="opt-body">
                                <input id="opt-body" type="checkbox" name="find-target" checked />
                                <span>Search <u>B</u>ody</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Nav Controls -->
                <div id="nav-controls" class="log-pane-container" role="region" aria-label="Nav Pane">
                    <div class="nav-input-holder">
                        <div class="nav-col">
                            <select class="no-overflow" name="searchOptions" id="searchOptions"
                                title="Confine search to:&#013; - All: regular search for all nodes&#013; - Subtree: current node and it's children&#013; - File: only search under a node with an @<file> directive&#013; - Chapter: only search under a node with an @chapter directer&#013; - Node: only search currently selected node">
                                <option value="0">All</option>
                                <option value="1">Subtree</option>
                                <option value="2">File</option>
                                <option value="3">Chapter</option>
                                <option value="4">Node</option>
                            </select>

                            <label class="label-nav" for="isTag"
                                title="Search Tag attributes, set algebra is supported:&#013;&amp; both the given tags&#013;&vert; either of the given tags (or both)&#013;&#45; the first tag, but not the second tag&#013;&#94; either of the given tags (but *not* both)">
                                <input type="checkbox" id="isTag" name="isTag">
                                <span>Tag</span>
                            </label>

                            <label class="label-nav" for="showParents" title="List parents of nodes in text searches">
                                <input type="checkbox" id="showParents" name="showParents">
                                <span>Show parents</span>
                            </label>
                        </div>
                        <input
                            title="Typing searches headlines interactively&#013;Enter freezes input and searches body text"
                            type="text" autocomplete="off" id="navText" name="navText" placeholder="<nav pattern here>">
                        <div id="freeze" title="Clear field to unfreeze">&#x2744;</div>
                    </div>
                    <div class="bottom-scroll" id="gotoPane">
                        <!-- this is the goto pane -->
                    </div>
                </div>

                <!-- Undo Controls -->
                <!-- <div id="undo-controls" class="log-pane-container" role="region" aria-label="Undo history">
                    <div id="undo-content" ></div>
                </div> -->

                <!-- Configuration controls -->
                <div id="config-controls" class="log-pane-container" role="region" aria-label="Configuration settings">
                    <span class="sub-title">Visible Controls</span>
                    <div class="config-col" aria-label="Config options">
                        <label for="show-prev-next-history">
                            <input id="show-prev-next-history" type="checkbox" name="config-option" checked />
                            Previous/Next History
                        </label>
                        <label for="show-prev-next-mark">
                            <input id="show-prev-next-mark" type="checkbox" name="config-option" checked />
                            Previous/Next Marked
                        </label>
                        <label for="show-toggle-mark">
                            <input id="show-toggle-mark" type="checkbox" name="config-option" />
                            Mark/Unmark
                        </label>
                        <label for="show-hoist-dehoist">
                            <input id="show-hoist-dehoist" type="checkbox" name="config-option" />
                            Hoist/De-hoist
                        </label>
                    </div>
                    <div class="config-col" aria-label="Config options">
                        <label for="show-layout-orientation">
                            <input id="show-layout-orientation" type="checkbox" name="config-option" checked />
                            Layout Orientation
                        </label>
                        <label for="show-theme-toggle">
                            <input id="show-theme-toggle" type="checkbox" name="config-option" checked />
                            Dark/Light Theme
                        </label>
                        <label for="show-node-icons">
                            <input id="show-node-icons" type="checkbox" name="config-option" checked />
                            Node Icons
                        </label>
                        <label for="show-collapse-all">
                            <input id="show-collapse-all" type="checkbox" name="config-option" checked />
                            Collapse All
                        </label>
                        <!-- Future possible options: -->
                        <!-- <label for="show-chapters">
                        <input id="show-chapters" type="checkbox" name="config-option" />
                        Chapters
                    </label> -->
                    </div>
                    <span class="sub-title">Keyboard Shortcuts</span>
                    <ul class="config-col shortcuts">
                        <li><span class="kbd-spacer"><kbd>Arrows</kbd></span> ‚Äî Navigate Outline</li>
                        <li><span class="kbd-spacer"><kbd>Alt</kbd>+<kbd>Arrows</kbd></span> ‚Äî Navigate from Body Pane
                        </li>
                        <li><span class="kbd-spacer"><kbd>Ctrl</kbd>+<kbd>F</kbd></span> ‚Äî Find (Reset Scope)
                        </li>
                        <li><span class="kbd-spacer"><kbd>F2</kbd>/<kbd>F3</kbd></span> ‚Äî Previous/Next Match</li>
                        <li><span class="kbd-spacer"><kbd>Ctrl</kbd>+<kbd>M</kbd></span> ‚Äî Mark Node</li>
                        <li><span class="kbd-spacer"><kbd>Alt</kbd>+<kbd>-</kbd></span> ‚Äî Collapse All</li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="main-resizer"></div>
        <div id="cross-resizer"></div>
        <div id="body-pane" tabindex="0" spellcheck="false"></div>
    </div>
    <div id="button-trigger-area"></div>
    <div id="button-container">
        <button tabindex="-1" id="menu-toggle" class="action-button" aria-label="Show menu" title="Show menu"><span
                id="menu-icon">&#8801;</span></button>
        <button tabindex="-1" id="theme-toggle" class="action-button" aria-label="Toggle dark/light mode"><span
                id="theme-icon">üåì</span></button>
        <button tabindex="-1" id="layout-toggle" class="action-button" aria-label="Toggle layout orientation"><span
                id="layout-icon">üìê</span></button>
        <button tabindex="-1" id="dehoist-btn" class="action-button" aria-label="De-hoist" title="De-hoist" disabled>
            <span class="svg-icon" id="dehoist-icon">
                <svg width="20" height="20" viewBox="0 0 17 17">
                    <path
                        d="m 9.717,5.896 0.701,1.249 h 3.238 v 6.494 H 2.344 V 9.3649687 L 1.096,10.038969 V 14.896 h 13.808 v -9 z M 3.198,0.844 1.733,8.267 4.326,6.865 6.23,10.258 9.687,8.388 7.78,4.997 10.374,3.596 Z"
                        style="fill:var(--find-text-color);" />
                </svg>
            </span>
        </button>
        <button tabindex="-1" id="hoist-btn" class="action-button" aria-label="Hoist" title="Hoist">
            <span class="svg-icon" id="hoist-icon">
                <svg width="20" height="20" viewBox="0 0 17 17">
                    <path
                        d="M 7.907,10.33 3.089,4.496 h 2.947 l 0.062,-3.89 3.93,0.002 -0.065,3.89 2.948,-0.001 z M 1.096,5.896 v 9 h 13.808 v -9 h -0.596094 l -1.07,1.249 H 13.656 v 6.494 H 2.344 V 7.145 h 0.4117139 l -1.031,-1.249 z"
                        style="fill:var(--find-text-color);" />
                </svg>
            </span>
        </button>
        <button tabindex="-1" id="next-marked-btn" class="action-button" aria-label="Go to Next Marked Node"
            title="Go to Next Marked Node" disabled>
            <span class="svg-icon" id="next-marked-icon">
                <svg width="20" height="20" viewBox="0 0 20 20">
                    <polygon points="14,10 6,3 6,17" fill="#cb1919" />
                </svg>
            </span>
        </button>
        <button tabindex="-1" id="toggle-mark-btn" class="action-button" aria-label="Toggle Mark" title="Toggle Mark">
            <span class="svg-icon" id="toggle-mark-icon">
                <svg width="20" height="20" viewBox="1.5 1 13 13">
                    <path
                        d="m 5.0855,2.17 c -0.532,0 -0.73,0.196 -0.73,0.728 v 10.933 l 3.645,-2.253 3.644,2.253 V 2.898 c 0,-0.532 -0.197,-0.729 -0.463,-0.7285 z m 3.906,4.088 0.525,1.574 -0.146,0.124 -1.37,-0.976 -1.37,0.976 -0.146,-0.124 0.525,-1.574 -1.356,-0.991 0.066,-0.168 1.676,-0.022 0.51,-1.574 h 0.182 l 0.51,1.574 1.677,0.022 0.08813,0.129125 z"
                        style="fill:#cb1919;" />
                </svg>
            </span>
        </button>
        <button tabindex="-1" id="prev-marked-btn" class="action-button" aria-label="Go to Previous Marked Node"
            title="Go to Previous Marked Node" disabled>
            <span class="svg-icon" id="prev-marked-icon">
                <svg width="20" height="20" viewBox="0 0 20 20">
                    <polygon points="6,10 14,3 14,17" fill="#cb1919" />
                </svg>
            </span>
        </button>
        <button tabindex="-1" id="next-btn" class="action-button" aria-label="Goto Next" title="Goto Next" disabled>
            <span class="svg-icon" id="next-icon">
                <svg width="20" height="20" viewBox="0 0 20 20">
                    <polygon points="14,10 6,3 6,17" fill="#494" />
                </svg>
            </span>
        </button>
        <button tabindex="-1" id="prev-btn" class="action-button" aria-label="Goto Previous" title="Goto Previous"
            disabled>
            <span class="svg-icon" id="prev-icon">
                <svg width="20" height="20" viewBox="0 0 20 20">
                    <polygon points="6,10 14,3 14,17" fill="#494" />
                </svg>
            </span>
        </button>
    </div>
    <div id="menu" class="context-menu">
        <ul>
            <li id="action-mark">Mark</li>
            <li id="action-unmark">Unmark</li>
            <li id="action-hoist">Hoist</li>
            <li id="action-dehoist">De-Hoist</li>
        </ul>
    </div>
    <div id="toast" role="status" aria-live="polite" hidden>
    </div>

    <div id="message-dialog" class="modal">
        <div class="modal-content">
            <h2 id="modal-dialog-title"></h2>
            <p id="modal-dialog-description"></p>
            <div id="modal-dialog-btn-container"></div>
        </div>
    </div>

    <div id="input-dialog" class="modal">
        <div class="modal-content">
            <h2 id="input-dialog-title"></h2>
            <p id="input-dialog-description"></p>
            <div class="input-dialog-container">
                <input id="input-dialog-input" autocomplete="off" />
                <button id="input-dialog-btn"></button>
            </div>
        </div>
    </div>

    <div id="quickpick-dialog" class="modal">
        <div class="modal-content">
            <input id="quickpick-dialog-input" autocomplete="off" />
            <ul id="quickpick-dialog-list" class="quick-pick-list"></ul>
        </div>
    </div>
</body>

</html>
